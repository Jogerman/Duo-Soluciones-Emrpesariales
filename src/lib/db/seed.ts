import { db } from './index'
import { services, team, clients, users } from './schema'
import * as bcrypt from 'bcryptjs'
import * as dotenv from 'dotenv'

dotenv.config({ path: '.env.local' })

/**
 * Seed Data Script
 * Populates the database with initial data for DUO Soluciones Empresariales
 */

const seedServices = async () => {
  console.log('üì¶ Seeding services...')

  const servicesData = [
    {
      title: 'Desarrollo Organizacional',
      slug: 'desarrollo-organizacional',
      category: 'AS1',
      shortDescription:
        'Dise√±o e implementaci√≥n de estructuras organizacionales efectivas y procesos de mejora continua.',
      longDescription:
        'Trabajamos junto a su organizaci√≥n para desarrollar estructuras organizacionales s√≥lidas, pol√≠ticas claras y procedimientos eficientes que impulsen el crecimiento y la efectividad operacional.',
      icon: 'Building2',
      featured: true,
      order: 1,
      benefits: [
        'Mejora en la eficiencia operacional',
        'Claridad en roles y responsabilidades',
        'Cultura organizacional fortalecida',
        'Mejor toma de decisiones',
      ],
      deliverables: [
        'Planificaci√≥n Estrat√©gica Organizacional',
        'Desarrollo de Pol√≠ticas y Manuales',
        'Estructuras Organizacionales y Perfiles',
        'Flujos de funciones cruzadas',
      ],
      keyFeatures: [
        'An√°lisis organizacional profundo',
        'Dise√±o de estructuras personalizadas',
        'Implementaci√≥n guiada',
      ],
      metaTitle: 'Desarrollo Organizacional - DUO Soluciones',
      metaDescription:
        'Servicios de consultor√≠a en desarrollo organizacional para empresas en Rep√∫blica Dominicana.',
      isActive: true,
    },
    {
      title: 'Mejora de Procesos y Cadena de Abastecimiento',
      slug: 'mejora-procesos-cadena-abastecimiento',
      category: 'AS2',
      shortDescription:
        'Optimizaci√≥n de procesos operacionales y cadena de suministro para maximizar eficiencia.',
      longDescription:
        'Aplicamos metodolog√≠as probadas para mapear, analizar y optimizar sus procesos de negocio y cadena de abastecimiento, eliminando desperdicios y maximizando valor.',
      icon: 'GitBranch',
      featured: true,
      order: 2,
      benefits: [
        'Reducci√≥n de costos operacionales',
        'Mejora en tiempos de entrega',
        'Mayor satisfacci√≥n del cliente',
        'Optimizaci√≥n de inventarios',
      ],
      deliverables: [
        'Mapa de Macroprocesos',
        'Cadena de Valor institucional',
        'Procesos Misionales de segundo nivel',
        'Dise√±o de redistribuci√≥n f√≠sica y rutas',
        'Optimizaci√≥n de procesos log√≠sticos',
      ],
      keyFeatures: ['Mapeo de procesos', 'An√°lisis de cadena de valor', 'Dise√±o log√≠stico'],
      metaTitle: 'Mejora de Procesos - DUO Soluciones',
      metaDescription: 'Optimizaci√≥n de procesos y cadena de abastecimiento para empresas.',
      isActive: true,
    },
    {
      title: 'Implementaci√≥n ERP / MS Dynamics / Power BI',
      slug: 'implementacion-erp-dynamics-powerbi',
      category: 'AS3',
      shortDescription:
        'Acompa√±amiento en proyectos de implementaci√≥n tecnol√≥gica y desarrollo de dashboards anal√≠ticos.',
      longDescription:
        'Guiamos su organizaci√≥n en la implementaci√≥n exitosa de sistemas ERP como Microsoft Dynamics y desarrollo de dashboards en Power BI para toma de decisiones basada en datos.',
      icon: 'BarChart3',
      featured: true,
      order: 3,
      benefits: [
        'Implementaci√≥n exitosa de tecnolog√≠a',
        'Visibilidad en tiempo real',
        'Mejores decisiones basadas en datos',
        'ROI medible',
      ],
      deliverables: [
        'Desarrollo de Ruta de Proyecto',
        'Documentos Constitutivos del Proyecto',
        'Dashboards en MS Power BI',
        'Indicadores de Gesti√≥n (Financieros, Operativos, Ventas)',
      ],
      keyFeatures: [
        'Gesti√≥n de proyectos tecnol√≥gicos',
        'Desarrollo de BI',
        'Capacitaci√≥n de usuarios',
      ],
      metaTitle: 'Implementaci√≥n ERP y Power BI - DUO Soluciones',
      metaDescription:
        'Servicios de implementaci√≥n de Microsoft Dynamics y desarrollo de dashboards en Power BI.',
      isActive: true,
    },
    {
      title: 'Gobernanza Corporativa',
      slug: 'gobernanza-corporativa',
      category: 'AS4',
      shortDescription: 'Dise√±o e implementaci√≥n de modelos de gobierno corporativo y compliance.',
      longDescription:
        'Desarrollamos modelos de gobernanza corporativa adaptados a su empresa, incluyendo pol√≠ticas de compliance, gesti√≥n de riesgos y protocolos familiares para empresas familiares.',
      icon: 'Shield',
      featured: true,
      order: 4,
      benefits: [
        'Mayor transparencia organizacional',
        'Mejor gesti√≥n de riesgos',
        'Cumplimiento normativo',
        'Continuidad empresarial',
      ],
      deliverables: [
        'Modelos de Gobierno Corporativos',
        'Reglamento Interno del Consejo',
        'Pol√≠ticas de Conflicto de Inter√©s',
        'Manual de √âtica',
        'Planes Estrat√©gicos Institucionales',
        'Pol√≠ticas de Compliance',
        'Protocolos Familiares',
        'An√°lisis de riesgo',
      ],
      keyFeatures: ['Dise√±o de gobernanza', 'Compliance y √©tica', 'Gesti√≥n de riesgos'],
      metaTitle: 'Gobernanza Corporativa - DUO Soluciones',
      metaDescription: 'Consultor√≠a en gobierno corporativo, compliance y gesti√≥n de riesgos.',
      isActive: true,
    },
  ]

  await db.insert(services).values(servicesData)
  console.log('‚úÖ Services seeded successfully')
}

const seedTeam = async () => {
  console.log('üë• Seeding team members...')

  const teamData = [
    {
      name: 'Miguel Rodriguez Vi√±as',
      role: 'Director General',
      bio: 'Experto en Gerencia de Operaciones con m√°s de 28 a√±os de experiencia en diversos sectores industriales. Post-grado en Alta Gesti√≥n Empresarial de George Washington University.',
      email: 'miguel.rodriguez@duosoluciones.com',
      linkedin: 'https://www.linkedin.com/in/miguel-rodriguez',
      experienceYears: 28,
      specialties: [
        'Gerencia de Operaciones',
        'Desarrollo Organizacional',
        'Mejora de Procesos',
        'Gesti√≥n de Proyectos',
      ],
      certifications: [
        {
          name: 'Post-grado Alta Gesti√≥n Empresarial',
          issuer: 'George Washington University',
        },
        {
          name: 'Certified Project Manager',
          issuer: 'CPM',
        },
      ],
      education: [
        {
          degree: 'Post-grado en Alta Gesti√≥n Empresarial',
          institution: 'George Washington University',
        },
      ],
      industries: ['Educaci√≥n', 'Seguridad P√∫blica', 'Salud', 'Farmac√©utico', 'Energ√≠a'],
      featured: true,
      order: 1,
      isActive: true,
    },
    {
      name: 'Angelina Burgos Dominguez',
      role: 'Directora de Operaciones',
      bio: 'Experta en Ingenier√≠a Log√≠stica con m√°s de 20 a√±os de experiencia. Becaria Fullbright, Ingeniera Industrial PUCMM con especializaci√≥n de Ohio State University.',
      email: 'angelina.burgos@duosoluciones.com',
      linkedin: 'https://www.linkedin.com/in/angelina-burgos',
      experienceYears: 20,
      specialties: [
        'Ingenier√≠a Log√≠stica',
        'Cadena de Abastecimiento',
        'Mejora de Procesos',
        'Gesti√≥n de Operaciones',
      ],
      certifications: [
        {
          name: 'Becaria Fullbright',
          issuer: 'Fullbright Program',
        },
        {
          name: 'Microsoft Certified Power Platform Fundamentals',
          issuer: 'Microsoft',
        },
      ],
      education: [
        {
          degree: 'Ingenier√≠a Log√≠stica',
          institution: 'Ohio State University',
        },
        {
          degree: 'Ingenier√≠a Industrial',
          institution: 'PUCMM',
        },
      ],
      industries: [
        'Cadena de Abastecimiento',
        'Educaci√≥n Superior',
        'Retail',
        'Farmac√©utico',
        'Construcci√≥n',
        'Manufactura',
      ],
      featured: true,
      order: 2,
      isActive: true,
    },
  ]

  await db.insert(team).values(teamData)
  console.log('‚úÖ Team members seeded successfully')
}

const seedClients = async () => {
  console.log('üè¢ Seeding clients...')

  const clientsData = [
    {
      name: 'Torres 2',
      slug: 'torres-2',
      industry: 'Construcci√≥n',
      featured: true,
      order: 1,
      isActive: true,
    },
    {
      name: 'Rizek Peralta',
      slug: 'rizek-peralta',
      industry: 'Legal',
      featured: true,
      order: 2,
      isActive: true,
    },
    {
      name: 'Mallen',
      slug: 'mallen',
      industry: 'Retail',
      featured: true,
      order: 3,
      isActive: true,
    },
    {
      name: 'Hospital Antonio Ochoa',
      slug: 'hospital-antonio-ochoa',
      industry: 'Salud',
      featured: true,
      order: 4,
      isActive: true,
    },
    {
      name: 'Colegio San Judas Tadeo',
      slug: 'colegio-san-judas-tadeo',
      industry: 'Educaci√≥n',
      featured: true,
      order: 5,
      isActive: true,
    },
    {
      name: 'Grupo Cometa',
      slug: 'grupo-cometa',
      industry: 'Manufactura',
      featured: false,
      order: 6,
      isActive: true,
    },
    {
      name: 'grabo+estilo',
      slug: 'grabo-estilo',
      industry: 'Retail',
      featured: false,
      order: 7,
      isActive: true,
    },
    {
      name: 'Nucleus',
      slug: 'nucleus',
      industry: 'Tecnolog√≠a',
      featured: false,
      order: 8,
      isActive: true,
    },
    {
      name: 'Orlando Comercial',
      slug: 'orlando-comercial',
      industry: 'Comercio',
      featured: false,
      order: 9,
      isActive: true,
    },
    {
      name: 'Greenwise',
      slug: 'greenwise',
      industry: 'Agricultura',
      featured: false,
      order: 10,
      isActive: true,
    },
    {
      name: 'APCRES',
      slug: 'apcres',
      industry: 'Energ√≠a',
      featured: false,
      order: 11,
      isActive: true,
    },
    {
      name: 'Centro M√©dico Batista',
      slug: 'centro-medico-batista',
      industry: 'Salud',
      featured: false,
      order: 12,
      isActive: true,
    },
    {
      name: 'Centro M√©dico Guadalupe',
      slug: 'centro-medico-guadalupe',
      industry: 'Salud',
      featured: false,
      order: 13,
      isActive: true,
    },
    {
      name: 'Smart Foam',
      slug: 'smart-foam',
      industry: 'Manufactura',
      featured: false,
      order: 14,
      isActive: true,
    },
    { name: 'HEMA', slug: 'hema', industry: 'Salud', featured: false, order: 15, isActive: true },
  ]

  await db.insert(clients).values(clientsData)
  console.log('‚úÖ Clients seeded successfully')
}

const seedUsers = async () => {
  console.log('üîê Seeding admin user...')

  // Create default admin user (password: admin123 - CHANGE IN PRODUCTION!)
  const hashedPassword = await bcrypt.hash('admin123', 10)

  const userData = [
    {
      name: 'Admin User',
      email: 'admin@duosoluciones.com',
      password: hashedPassword,
      role: 'admin',
      isActive: true,
    },
  ]

  await db.insert(users).values(userData)
  console.log('‚úÖ Admin user seeded successfully')
  console.log('‚ö†Ô∏è  Default credentials: admin@duosoluciones.com / admin123')
  console.log('‚ö†Ô∏è  IMPORTANT: Change the password immediately in production!')
}

const runSeed = async () => {
  try {
    console.log('üå± Starting database seed...\n')

    await seedServices()
    await seedTeam()
    await seedClients()
    await seedUsers()

    console.log('\n‚úÖ Database seeded successfully!')
    console.log('üìä Summary:')
    console.log('   - 4 Services (AS1-AS4)')
    console.log('   - 2 Team members')
    console.log('   - 15 Clients')
    console.log('   - 1 Admin user')
  } catch (error) {
    console.error('‚ùå Seed failed:', error)
    throw error
  } finally {
    process.exit(0)
  }
}

// Run seed if this file is executed directly
if (require.main === module) {
  runSeed()
}

export default runSeed
